{"ast":null,"code":"var _jsxFileName = \"/Users/shriharpande/Documents/mit/sem 4/dbms/TridentHotel/frontend/src/pages/GuestCheckout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GuestCheckout = () => {\n  _s();\n  const [bill, setBill] = useState(null);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchBill = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('No token found in localStorage.');\n        alert('You are not logged in. Please log in to continue.');\n        return;\n      }\n      try {\n        const response = await fetch('http://localhost:5000/api/checkout', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          console.error('Failed to fetch bill:', response.statusText);\n          setError('Failed to fetch bill. Please try again later.');\n          return;\n        }\n        const data = await response.json();\n        setBill(data);\n      } catch (err) {\n        console.error('Error fetching bill:', err);\n        setError('Something went wrong. Please try again later.');\n      }\n    };\n    fetchBill();\n  }, []);\n  const handlePayment = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/pay', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.ok) {\n        alert('Payment successful!');\n        window.location.href = '/guest-dashboard';\n      } else {\n        alert('Payment failed. Please try again.');\n      }\n    } catch (err) {\n      console.error('Error during payment:', err);\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 16\n    }, this);\n  }\n  if (!bill) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading bill details...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Facilities Used\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: bill.facilities.map((facility, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [facility.facility_name, \" - \\u20B9\", facility.usage_cost]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Restaurant Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: bill.restaurantOrders.map((order, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [order.item_name, \" (x\", order.quantity, \") - \\u20B9\", order.line_total]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Total Bill\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u20B9\", bill.totalBill]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      children: \"Pay Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n_s(GuestCheckout, \"LSJbNsTdEqS1OvMxTPZrn39Q8sQ=\");\n_c = GuestCheckout;\nexport default GuestCheckout;\nvar _c;\n$RefreshReg$(_c, \"GuestCheckout\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","GuestCheckout","_s","bill","setBill","error","setError","fetchBill","token","localStorage","getItem","console","alert","response","fetch","headers","Authorization","ok","statusText","data","json","err","handlePayment","method","window","location","href","style","color","children","fileName","_jsxFileName","lineNumber","columnNumber","facilities","map","facility","index","facility_name","usage_cost","restaurantOrders","order","item_name","quantity","line_total","totalBill","onClick","_c","$RefreshReg$"],"sources":["/Users/shriharpande/Documents/mit/sem 4/dbms/TridentHotel/frontend/src/pages/GuestCheckout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst GuestCheckout = () => {\n    const [bill, setBill] = useState(null);\n    const [error, setError] = useState('');\n\n    useEffect(() => {\n        const fetchBill = async () => {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('No token found in localStorage.');\n                alert('You are not logged in. Please log in to continue.');\n                return;\n            }\n\n            try {\n                const response = await fetch('http://localhost:5000/api/checkout', {\n                    headers: {\n                        Authorization: `Bearer ${token}`,\n                    },\n                });\n\n                if (!response.ok) {\n                    console.error('Failed to fetch bill:', response.statusText);\n                    setError('Failed to fetch bill. Please try again later.');\n                    return;\n                }\n\n                const data = await response.json();\n                setBill(data);\n            } catch (err) {\n                console.error('Error fetching bill:', err);\n                setError('Something went wrong. Please try again later.');\n            }\n        };\n\n        fetchBill();\n    }, []);\n\n    const handlePayment = async () => {\n        try {\n            const response = await fetch('http://localhost:5000/api/pay', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\n                },\n            });\n\n            if (response.ok) {\n                alert('Payment successful!');\n                window.location.href = '/guest-dashboard';\n            } else {\n                alert('Payment failed. Please try again.');\n            }\n        } catch (err) {\n            console.error('Error during payment:', err);\n        }\n    };\n\n    if (error) {\n        return <p style={{ color: 'red' }}>{error}</p>;\n    }\n\n    if (!bill) {\n        return <p>Loading bill details...</p>;\n    }\n\n    return (\n        <div>\n            <h1>Checkout</h1>\n            <h2>Facilities Used</h2>\n            <ul>\n                {bill.facilities.map((facility, index) => (\n                    <li key={index}>\n                        {facility.facility_name} - ₹{facility.usage_cost}\n                    </li>\n                ))}\n            </ul>\n\n            <h2>Restaurant Orders</h2>\n            <ul>\n                {bill.restaurantOrders.map((order, index) => (\n                    <li key={index}>\n                        {order.item_name} (x{order.quantity}) - ₹{order.line_total}\n                    </li>\n                ))}\n            </ul>\n\n            <h2>Total Bill</h2>\n            <p>₹{bill.totalBill}</p>\n\n            <button onClick={handlePayment}>Pay Now</button>\n        </div>\n    );\n};\n\nexport default GuestCheckout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}