{"ast":null,"code":"var _jsxFileName = \"/Users/shriharpande/Documents/mit/sem 4/dbms/TridentHotel/frontend/src/pages/GuestCheckout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GuestCheckout = () => {\n  _s();\n  const [bill, setBill] = useState(null);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchBill = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('No token found in localStorage.');\n        alert('You are not logged in. Please log in to continue.');\n        return;\n      }\n      console.log('Attempting to fetch bill from /api/checkout');\n      try {\n        const response = await fetch('http://localhost:5000/api/checkout', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          console.error('Failed to fetch bill:', response.statusText);\n          setError('Failed to fetch bill. Please try again later.');\n          return;\n        }\n        const data = await response.json();\n        setBill(data);\n      } catch (err) {\n        console.error('Error fetching bill:', err);\n        setError('Something went wrong. Please try again later.');\n      }\n    };\n    fetchBill();\n  }, []);\n  const handlePayment = () => {\n    alert('Payment successful!');\n    window.location.href = '/'; // Redirect to the login page\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 16\n    }, this);\n  }\n  if (!bill) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading bill details...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Room Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Room Cost: \\u20B9\", bill.roomCost]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Facilities Used\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: bill.facilities.map((facility, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [facility.facility_name, \" - \\u20B9\", facility.usage_cost]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Restaurant Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: bill.restaurantOrders.map((order, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [order.item_name, \" (x\", order.quantity, \") - \\u20B9\", order.line_total]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Cost to Pay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u20B9\", (bill.totalBill - bill.depositAmount).toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      children: \"Pay Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(GuestCheckout, \"LSJbNsTdEqS1OvMxTPZrn39Q8sQ=\");\n_c = GuestCheckout;\nexport default GuestCheckout;\nvar _c;\n$RefreshReg$(_c, \"GuestCheckout\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","GuestCheckout","_s","bill","setBill","error","setError","fetchBill","token","localStorage","getItem","console","alert","log","response","fetch","headers","Authorization","ok","statusText","data","json","err","handlePayment","window","location","href","style","color","children","fileName","_jsxFileName","lineNumber","columnNumber","roomCost","facilities","map","facility","index","facility_name","usage_cost","restaurantOrders","order","item_name","quantity","line_total","totalBill","depositAmount","toFixed","onClick","_c","$RefreshReg$"],"sources":["/Users/shriharpande/Documents/mit/sem 4/dbms/TridentHotel/frontend/src/pages/GuestCheckout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst GuestCheckout = () => {\n    const [bill, setBill] = useState(null);\n    const [error, setError] = useState('');\n\n    useEffect(() => {\n        const fetchBill = async () => {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('No token found in localStorage.');\n                alert('You are not logged in. Please log in to continue.');\n                return;\n            }\n\n            console.log('Attempting to fetch bill from /api/checkout');\n\n            try {\n                const response = await fetch('http://localhost:5000/api/checkout', {\n                    headers: {\n                        Authorization: `Bearer ${token}`,\n                    },\n                });\n\n                if (!response.ok) {\n                    console.error('Failed to fetch bill:', response.statusText);\n                    setError('Failed to fetch bill. Please try again later.');\n                    return;\n                }\n\n                const data = await response.json();\n                setBill(data);\n            } catch (err) {\n                console.error('Error fetching bill:', err);\n                setError('Something went wrong. Please try again later.');\n            }\n        };\n\n        fetchBill();\n    }, []);\n\n    const handlePayment = () => {\n        alert('Payment successful!');\n        window.location.href = '/'; // Redirect to the login page\n    };\n\n    if (error) {\n        return <p style={{ color: 'red' }}>{error}</p>;\n    }\n\n    if (!bill) {\n        return <p>Loading bill details...</p>;\n    }\n\n    return (\n        <div>\n            <h1>Checkout</h1>\n            \n            <h2>Room Details</h2>\n            <p>Room Cost: ₹{bill.roomCost}</p>\n\n            <h2>Facilities Used</h2>\n            <ul>\n                {bill.facilities.map((facility, index) => (\n                    <li key={index}>\n                        {facility.facility_name} - ₹{facility.usage_cost}\n                    </li>\n                ))}\n            </ul>\n\n            <h2>Restaurant Orders</h2>\n            <ul>\n                {bill.restaurantOrders.map((order, index) => (\n                    <li key={index}>\n                        {order.item_name} (x{order.quantity}) - ₹{order.line_total}\n                    </li>\n                ))}\n            </ul>\n\n            <h2>Cost to Pay</h2>\n            <p>₹{(bill.totalBill - bill.depositAmount).toFixed(2)}</p>\n\n            <button onClick={handlePayment}>Pay Now</button>\n        </div>\n    );\n};\n\nexport default GuestCheckout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}